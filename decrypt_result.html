<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Decrypted Image</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <style> body { padding-top: 30px; } </style>
</head>
<body>
<div class="container">
  <h2 class="text-center mb-4">Decrypted Image</h2>
  <div class="text-center">
    <img src="data:image/png;base64,{{ decrypted_preview }}" class="img-fluid mb-3" style="max-width:600px;">
  </div>
  <div class="text-center mb-3">
    <p><strong>Original MD5 Hash:</strong> {{ original_hash }}</p>
    <p><strong>Decrypted MD5 Hash:</strong> {{ decrypted_hash }}</p>
    {% if processing_option == "compress" %}
      {% if original_hash == decrypted_hash %}
        <p class="text-success"><strong>MD5 hashes match! (Lossless)</strong></p>
      {% else %}
        <p class="text-danger"><strong>MD5 hashes differ!</strong></p>
      {% endif %}
    {% endif %}
  </div>
  <!-- Perceptual hash comparison removed -->
  <div class="text-center mb-3">
    <h4>Difference Image</h4>
    <img src="data:image/png;base64,{{ diff_image }}" class="img-fluid" style="max-width:600px;">
  </div>
  <div class="text-center">
    <a href="data:image/png;base64,{{ decrypted_preview }}" download="decrypted.png" class="btn btn-success">Download Decrypted Image</a>
  </div>
</div>
</body>
</html>
